#!/usr/bin/env bash

file="$1"
window="doc"
session="$(tmux display-message -p '#S')"

echo "file: $file"

# open nvim instance or add buffer if nvim already running
# NOTE: expect $window to only have one pane
if [[ $(tmux display-message -p -t ":$window" '#{==:#{pane_current_command},nvim}') == 1 ]]; then
  tmux send-keys -t "$session:$window" ":edit $file" Enter
else
  tmux send-keys -t "$session:$window" "nvim $file" Enter
fi

# switch to window
tmux selectw -t "$session:$window" >/dev/null
